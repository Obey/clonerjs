var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),BABYLONX;!function(t){var e=function(){function t(){t.objInstances=0|t.objInstances+1}return t.prototype.init=function(){this.dom(),this._engine=new BABYLON.Engine(this._canvas,!0,{stencil:!0}),this._scene=new BABYLON.Scene(this._engine),this.cameras(),this.lights(),this._engine.runRenderLoop(this.renderloop.bind(this))},t.prototype.dom=function(){this._canvas=document.getElementById("renderCanvas")},t.prototype.cameras=function(){this._camera=new BABYLON.ArcRotateCamera("camera",-Math.PI/2+.2,Math.PI/2,10,new BABYLON.Vector3(-2,10.19,22.73),this._scene),this._camera.setTarget(new BABYLON.Vector3(0,0,0)),this._camera.attachControl(this._canvas,!0),this._camera.wheelPrecision=8,this._camera.radius=25,this._camera.alpha=1.66,this._camera.beta=1.2},t.prototype.lights=function(){new BABYLON.Vector3(0,10,0);this._light=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,3,-10),this._scene),this._light.groundColor=new BABYLON.Color3(.9,.9,.9),this._light.intensity=1},t.prototype.objects=function(){},t.prototype.createCubeInternal=function(e,n){var o=new BABYLON.StandardMaterial("mcube"+t.objInstances,this._scene);o.diffuseColor=n,o.specularColor=BABYLON.Color3.Green(),e.material=o;var i=new BABYLON.MarbleProceduralTexture("marble",512,this.scene);return i.numberOfTilesHeight=.5,i.numberOfTilesWidth=.5,i.jointColor=new BABYLON.Color3(0,0,1),i.amplitude=9,o.diffuseTexture=i,t.objInstances++,e},t.prototype.createCubeX=function(t,e){void 0===t&&(t={w:1,h:1,d:1}),void 0===e&&(e="#FF0000");var n={width:t.w,depth:t.d,height:t.h},o=BABYLON.MeshBuilder.CreateBox("cube",n,this._scene);return this.createCubeInternal(o,BABYLON.Color3.FromHexString(e))},t.prototype.createCube=function(e,n){void 0===e&&(e=1),void 0===n&&(n=BABYLON.Color3.Red());var o=BABYLON.Mesh.CreateBox("cube"+t.objInstances,e,this._scene);return this.createCubeInternal(o,n)},t.prototype.createCone=function(e,n){void 0===e&&(e=1),void 0===n&&(n=BABYLON.Color3.Green());var o=new BABYLON.StandardMaterial("cmat"+t.objInstances,this._scene),i=BABYLON.MeshBuilder.CreateCylinder("cone"+t.objInstances,{height:1,diameterTop:0,tessellation:32},this._scene);o.diffuseColor=n,o.specularColor=BABYLON.Color3.Green(),i.material=o;var s=new BABYLON.MarbleProceduralTexture("marble",512,this.scene);return s.numberOfTilesHeight=1,s.numberOfTilesWidth=.5,s.amplitude=9.2,o.diffuseTexture=s,t.objInstances++,i},t.prototype.createCylinder=function(e,n){void 0===e&&(e=1),void 0===n&&(n=BABYLON.Color3.Green());var o=new BABYLON.StandardMaterial("cmat"+t.objInstances,this._scene),i=BABYLON.MeshBuilder.CreateCylinder("cone"+t.objInstances,{height:e,tessellation:32},this._scene);o.diffuseColor=n,o.specularColor=BABYLON.Color3.Green(),i.material=o;var s=new BABYLON.MarbleProceduralTexture("marble",512,this.scene);return s.numberOfTilesHeight=1,s.numberOfTilesWidth=.5,s.amplitude=9.2,o.diffuseTexture=s,t.objInstances++,i},t.prototype.createIcoSphere=function(t){void 0===t&&(t=6);var e=BABYLON.MeshBuilder.CreateIcoSphere("m",{radius:t},this._scene);return e.updateFacetData(),e},t.prototype.createSphere=function(e,n,o){void 0===e&&(e=1),void 0===n&&(n=BABYLON.Color3.Blue()),void 0===o&&(o=32);var i=new BABYLON.StandardMaterial("stdmat"+t.objInstances,this._scene),s=BABYLON.MeshBuilder.CreateSphere("sphere"+t.objInstances,{diameter:e,segments:o},this._scene),r=new BABYLON.MarbleProceduralTexture("marble",512,this._scene);return r.numberOfTilesHeight=1,r.numberOfTilesWidth=.5,r.amplitude=9.2,i.diffuseTexture=r,i.diffuseColor=n,i.specularColor=BABYLON.Color3.Green(),s.material=i,t.objInstances++,s},t.prototype.renderloop=function(){this._scene.render()},Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),t}();t.Demoscene=e;var n=function(t){function e(e,n,o,i){void 0===i&&(i=null);var s=t.call(this,e,n,o)||this;return s._cloner=null,s._cloner=i,s}return __extends(e,t),e.prototype["delete"]=function(){null!=this._cloner?this._cloner["delete"]():this.getChildren()[0].dispose(),this.parent=null,this.dispose()},e.prototype.createClone=function(t,e,n){var o;return t instanceof s?o=t.createClone(this):e?(o=t.createInstance(n+"_i"),o.parent=this):(o=t.clone(n+"_c"),o.parent=this),o},e}(BABYLON.Mesh);t.CMesh=n;var o;!function(t){t[t.ALL=7]="ALL",t[t.POSITION=1]="POSITION",t[t.ROTATION=2]="ROTATION",t[t.SCALE=4]="SCALE"}(o||(o={}));var i=function(){function t(t){void 0===t&&(t=42),this._strength=1,this._position=new BABYLON.Vector3(0,0,0),this._rotation=new BABYLON.Vector3(0,0,0),this._scale=new BABYLON.Vector3(0,0,0),this._uniformScale=!1,this._clients=[],this._seed=this._s=t,this._rfunction=function(){return this._s=1e4*Math.sin(this._s),this._s-Math.floor(this._s)}}return t.prototype.random=function(){return this._rfunction()},t.prototype.reset=function(){this._s=this._seed},t.prototype.updateRotation=function(t){var e=this._rotation.multiplyByFloats((-.5+this.random())*this._strength,(-.5+this.random())*this._strength,(-.5+this.random())*this._strength);return t.add(e)},t.prototype.updatePosition=function(t){var e=this._position.multiplyByFloats((-.5+this.random())*this._strength,(-.5+this.random())*this._strength,(-.5+this.random())*this._strength);return t.add(e)},t.prototype.updateScale=function(t){var e=this.random(),n=e,o=e;0==this._uniformScale&&(n=this.random(),o=this.random());var i=this._scale.multiplyByFloats((-.5+e)*this._strength,(-.5+n)*this._strength,(-.5+n)*this._strength);return t.add(i)},t.prototype.addClient=function(t){this._clients.push(t)},t.prototype.updateClients=function(){this._clients.forEach(function(t){t.update()})},Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{set:function(t){this._position.x=t.x,this._position.y=t.y,this._position.z=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{set:function(t){this._uniformScale=t.u,this._scale.x=this._scale.y=this._scale.z=t.x,0==t.u&&(this._scale.y=t.y,this._scale.z=t.z)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{set:function(t){this._rotation.x=t.x*Math.PI/180,this._rotation.y=t.y*Math.PI/180,this._rotation.z=t.z*Math.PI/180},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seed",{set:function(t){this._seed=this._s=t},enumerable:!0,configurable:!0}),t}();t.RandomEffector=i;var s=function(){function t(){this._rootNode=null,this._effectors=[]}return t.prototype.setEnabled=function(t){this._rootNode.setEnabled(t)},t.prototype.createClone=function(){},t.prototype.update=function(){},t.prototype.addEffector=function(t,e){this._effectors.push({effector:t,sensitivity:e}),t.addClient(this),this.update()},Object.defineProperty(t.prototype,"effectors",{get:function(){return this._effectors},enumerable:!0,configurable:!0}),t.prototype.eScale=function(e){for(var n=t.vZero.add(e),o=0;o<this._effectors.length;o++)n=BABYLON.Vector3.Lerp(e,this._effectors[o].effector.updateScale(n),this._effectors[o].sensitivity);return n},t.prototype.eRotate=function(e){for(var n=t.vZero.add(e),o=0;o<this._effectors.length;o++)n=BABYLON.Vector3.Lerp(e,this._effectors[o].effector.updateRotation(n),this._effectors[o].sensitivity);return n},t.prototype.ePosition=function(e){for(var n=t.vZero.add(e),o=0;o<this._effectors.length;o++)n=BABYLON.Vector3.Lerp(e,this._effectors[o].effector.updatePosition(n),this._effectors[o].sensitivity);return n},t.prototype.eReset=function(){this._effectors.forEach(function(t){t.effector.reset()})},t}();s.vOne=new BABYLON.Vector3(1,1,1),s.vZero=new BABYLON.Vector3(0,0,0),t.Cloner=s;var r=function(t){function e(o,i,s){var r=void 0===s?{}:s,c=r.count,h=void 0===c?3:c,a=r.offset,_=void 0===a?0:a,u=r.radius,l=void 0===u?3:u,p=r.align,f=void 0===p?!0:p,d=r.startangle,y=void 0===d?0:d,g=r.endangle,m=void 0===g?360:g,v=r.useInstances,b=void 0===v?!0:v,B=r.plane,O=void 0===B?{x:1,y:0,z:1}:B,P=t.call(this)||this;return e.instance_nr=0|e.instance_nr+1,P._instance_nr=e.instance_nr,P._mesh=o,P._mesh.forEach(function(t){t.setEnabled(!1)}),P._scene=i,P._useInstances=b,P._clones=[],P._count=Number(h),P._radius=Number(l),P._plane=new BABYLON.Vector3(O.x,O.y,O.z),P._startangle=Math.PI*y/180,P._endangle=Math.PI*m/180,P._offset=_,P._align=f,P._frame=0,P._formula="2-Math.pow(Math.abs(Math.sin(frame/10+Math.PI*i/2)),0.1)*1.5",P._formula="scaling=1-Math.sin(frame/6+2*ix*Math.PI)/2",P._rootNode=new n("rootRC_"+P._instance_nr,P._scene,null,P),P.createClones(),P.calcPos(),P}return __extends(e,t),e.prototype.createClone=function(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var i=new e(this._mesh,this._scene,{count:this._count,offset:this._offset,radius:this._radius,startangle:180*this._startangle/Math.PI,endangle:180*this._endangle/Math.PI,useInstances:this._useInstances,plane:{x:this._plane.x,y:this._plane.y,z:this._plane.z}});return t._cloner=i,i.root.parent=t,i.root},e.prototype.createClones=function(t){void 0===t&&(t=0);for(var e=t;e<this._count;e++){var o=new n("n_rc"+this._instance_nr+"_"+e,this._scene,this._rootNode);this._clones.push(o);var i=e%this._mesh.length;o.createClone(this._mesh[i],this._useInstances,this._mesh[i].name+"_rc"+this._instance_nr+"_"+e)}},e.prototype.calcRot=function(){for(var t=0;t<this._count;t++){var e=this._endangle-this._startangle,n=e/this._count;this._clones[t].getChildren()[0].rotation.x=this._clones[t].getChildren()[0].rotation.y=this._clones[t].getChildren()[0].rotation.z=0,0===this._plane.y?this._clones[t].getChildren()[0].rotation.y=this._align?this._offset+this._startangle+t*n:0:0===this._plane.x?this._clones[t].getChildren()[0].rotation.x=this._align?-this._offset-this._startangle-t*n:0:this._clones[t].getChildren()[0].rotation.z=this._align?-this._offset-this._startangle-t*n:0;var o=this.eRotate(this._clones[t].getChildren()[0].rotation);this._clones[t].getChildren()[0].rotation=o}},e.prototype.calcSize=function(){for(var t=0;t<this._count;t++)this._clones[t].getChildren()[0].scaling=this.eScale(s.vOne)},e.prototype.calcPos=function(){this.eReset();for(var t=0;t<this._count;t++){var e=this._endangle-this._startangle,n=e/this._count;this._clones[t].position.x=this._clones[t].position.y=this._clones[t].position.z=0,0===this._plane.y?(this._clones[t].position.x=Math.sin(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position.z=Math.cos(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position=this.ePosition(this._clones[t].position)):0===this._plane.x?(this._clones[t].position.y=Math.sin(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position.z=Math.cos(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position=this.ePosition(this._clones[t].position)):(this._clones[t].position.x=Math.sin(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position.y=Math.cos(this._offset+this._startangle+t*n)*this._radius,this._clones[t].position=this.ePosition(this._clones[t].position))}},e.prototype.update=function(){this.calcRot(),this.calcPos(),this.calcSize()},e.prototype["delete"]=function(){for(var t=this._count-1;t>=0;t--)this._clones[t]["delete"]();this._rootNode.dispose()},e.prototype.recalc=function(){var t=this._count;this.count=0,this.count=t},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(t){var e=Number(t);if(e<Number(this._count)){for(var n=this._count-1;n>=e;n--)this._clones[n]["delete"]();this._count=e,this._clones.length=e}else if(e>Number(this._count)){var o=this._count;this._count=e,this.createClones(o)}this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return 180*this._offset/Math.PI},set:function(t){this._offset=Math.PI*t/180,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startangle",{get:function(){return 180*this._startangle/Math.PI},set:function(t){this._startangle=Math.PI*t/180,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endangle",{get:function(){return 180*this._endangle/Math.PI},set:function(t){this._endangle=Math.PI*t/180,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plane",{set:function(t){this._plane=new BABYLON.Vector3(t.x,t.y,t.z),this.update()},enumerable:!0,configurable:!0}),e.prototype.setScaling=function(t,e){this._clones[t].scaling=new BABYLON.Vector3(e.x,e.y,e.z),this.update()},e}(s);t.RadialCloner=r;var c=function(t){function e(o,i,s){var r=t.call(this)||this;return r._useInstances=!0,e.instance_nr=0|e.instance_nr+1,r._mesh=o,r._scene=s,r._template=i,r._clones=[],r._positions=i.getFacetLocalPositions(),r._normals=i.getFacetLocalNormals(),r._template.isVisible=!1,r._mesh.forEach(function(t){t.setEnabled(!1)}),r._instance_nr=e.instance_nr,r._rootNode=new n("rootOC_"+e.instance_nr,r._scene,null,r),r.createClones(),r.calcPos(),r}return __extends(e,t),e.prototype.createClones=function(t){void 0===t&&(t=0);var o=0;this._count=this._positions.length;for(var i=0;i<this._positions.length;i++){o=i%this._mesh.length;var s=new n("n_lc"+e.instance_nr+"_"+i,this._scene,this._rootNode);this._clones.push(s),s.createClone(this._mesh[o],this._useInstances,this._mesh[o].name+"_mc"+e.instance_nr+"_"+i)}},e.prototype.calcRot=function(){for(var t=0;t<this._count;t++){var e=this.eRotate(s.vZero);this._clones[t].getChildren()[0].rotation=e}},e.prototype.calcSize=function(){for(var t=0;t<this._count;t++)this._clones[t].scaling=this.eScale(s.vOne)},e.prototype.calcPos=function(){this.eReset();for(var t=0;t<this._clones.length;t++)this._clones[t].position=this.ePosition(this._positions[t])},e.prototype.update=function(){this._count>0&&(this.calcRot(),this.calcPos(),this.calcSize())},Object.defineProperty(e.prototype,"root",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),e}(s);t.ObjectCloner=c;var h=function(t){function e(o,i,s){var r=void 0===s?{}:s,c=r.useInstances,h=void 0===c?!0:c,a=r.mcount,_=void 0===a?{x:2,y:2,z:2}:a,u=r.size,l=void 0===u?{x:2,y:2,z:2}:u,p=r.iModeStep,f=void 0===p?!1:p,d=t.call(this)||this;return e.instance_nr=0|e.instance_nr+1,d._mesh=o,d._mesh.forEach(function(t){t.setEnabled(!1)}),d._scene=i,d._useInstances=h,d._clones=[],d._size=l,d._mcount=_,d._count=Number(_.x*_.y*_.z),d._iModeStep=f,d._instance_nr=e.instance_nr,d._rootNode=new n("rootMC_"+e.instance_nr,d._scene,null,d),d.createClones(),d.update(),d}return __extends(e,t),e.prototype.createClone=function(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var i=new e(this._mesh,this._scene,{mcount:{x:3,y:3,z:3}});return t._cloner=i,i.root.parent=t,i.root},e.prototype.createClones=function(t){void 0===t&&(t=0);for(var o=0,i=t;i<this._mcount.z;i++)for(var s=t;s<this._mcount.y;s++)for(var r=t;r<this._mcount.x;r++){var c=new n("n_lc"+e.instance_nr+"_"+r+s+i,this._scene,this._rootNode);this._clones.push(c);var h=r+this._mcount.x*s+this._mcount.x*this._mcount.y*i;o=h%this._mesh.length,c.createClone(this._mesh[o],this._useInstances,this._mesh[o].name+"_mc"+e.instance_nr+"_"+r+s+i)}this.calcPos()},Object.defineProperty(e.prototype,"mcount",{set:function(t){this._mcount=t,this["delete"](),this._count=Number(this._mcount.x*this._mcount.y*this._mcount.z),this.createClones()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(t){this._size=t,this.update()},enumerable:!0,configurable:!0}),e.prototype.calcRot=function(){for(var t=0;t<this._count;t++){var e=this.eRotate(s.vZero);this._clones[t].getChildren()[0].rotation=e}},e.prototype.calcSize=function(){for(var t=0;t<this._count;t++)this._clones[t].getChildren()[0].scaling=this.eScale(s.vOne)},e.prototype.calcPos=function(){this.eReset();for(var t=0,e=0;e<this._mcount.z;e++)for(var n=0;n<this._mcount.y;n++)for(var o=0;o<this._mcount.x;o++){var i=o+this._mcount.x*n+this._mcount.x*this._mcount.y*e;t=i%this._mesh.length;var r=-this._size.x*(this._mcount.x-1)/2,c=-this._size.y*(this._mcount.y-1)/2,h=-this._size.z*(this._mcount.z-1)/2;this._clones[i].position.x=r+o*this._size.x,this._clones[i].position.y=c+n*this._size.y,this._clones[i].position.z=h+e*this._size.z,this._clones[i].getChildren()[0].position=this.ePosition(s.vZero)}},Object.defineProperty(e.prototype,"root",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),e.prototype["delete"]=function(){for(var t=this._count-1;t>=0;t--)this._clones[t]["delete"]();this._clones.length=0},e.prototype.update=function(){this._count>0&&(this.calcRot(),this.calcPos(),this.calcSize())},e}(s);t.MatrixCloner=h;var a=function(t){function e(o,i,s){var r=void 0===s?{}:s,c=r.count,h=void 0===c?3:c,a=r.offset,_=void 0===a?0:a,u=r.growth,l=void 0===u?1:u,p=r.useInstances,f=void 0===p?!0:p,d=r.P,y=void 0===d?{x:0,y:2,z:0}:d,g=r.S,m=void 0===g?{x:1,y:1,z:1}:g,v=r.R,b=void 0===v?{x:0,y:0,z:0}:v,B=r.iModeStep,O=void 0===B?!1:B,P=t.call(this)||this;return e.instance_nr=0|e.instance_nr+1,P._mesh=o,P._mesh.forEach(function(t){t.setEnabled(!1)}),P._scene=i,P._useInstances=f,P._clones=[],P._count=Number(h),P._offset=_,P._P=new BABYLON.Vector3(y.x,y.y,y.z),P._S=new BABYLON.Vector3(m.x,m.y,m.z),P._R=new BABYLON.Vector3(b.x,b.y,b.z),P._iModeStep=O,P._growth=l,P._instance_nr=e.instance_nr,P._rootNode=new n("rootLC_"+e.instance_nr,P._scene,null,P),P.createClones(),P.update(),P}return __extends(e,t),e.prototype.createClone=function(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var i=new e(this._mesh,this._scene,{count:this._count,offset:this._offset,growth:this._growth,useInstances:this._useInstances,P:{x:this._P.x,y:this._P.y,z:this._P.z},S:{x:this._S.x,y:this._S.y,z:this._S.z},R:{x:this._R.x,y:this._R.y,z:this._R.z},iModeStep:this._iModeStep});return t._cloner=i,i.root.parent=t,i.root},e.prototype.createClones=function(t){void 0===t&&(t=0);for(var o=0,i=t;i<this._count;i++){var s=new n("n_lc"+e.instance_nr+"_"+i,this._scene,0==i?this._rootNode:this._clones[i-1]);this._clones.push(s),o=i%this._mesh.length,s.createClone(this._mesh[o],this._useInstances,this._mesh[o].name+"_lc"+e.instance_nr+"_"+i)}},e.prototype.calcSize=function(){for(var t=1;t<this._count;t++){var e=BABYLON.Vector3.Lerp(s.vOne,this._S,this._iModeStep?t:t/(this._count-1));this._clones[t].getChildren()[0].scaling=this.eScale(e)}},e.prototype.calcPos=function(){this.eReset();var t=this._growth;if(0==this._iModeStep){var e=1==this._count?1:this._count-1;t=1/e*this._growth}this._clones[0].position=BABYLON.Vector3.Lerp(s.vZero,this._P,t*this._offset),this._clones[0].position=this.ePosition(this._clones[0].position);for(var n=1;n<this._count;n++)this._clones[n].position=BABYLON.Vector3.Lerp(s.vZero,this._P,t),this._clones[n].getChildren()[0].position=this.ePosition(s.vZero)},e.prototype.calcRot=function(){for(var t=1;t<this._count;t++){var e=(this._clones[t].getChildren()[0],BABYLON.Vector3.Lerp(s.vZero,this._R,this._iModeStep?t*this._growth:t/(this._count-1)*this._growth));this._clones[t].getChildren()[0].rotation=this.eRotate(e)}},e.prototype.update=function(){this._count>0&&(this.calcRot(),this.calcPos(),this.calcSize())},e.prototype.recalc=function(){var t=this._count;this.count=0,this.count=t},Object.defineProperty(e.prototype,"growth",{set:function(t){this._growth=t,this.update()},enumerable:!0,configurable:!0}),e.prototype["delete"]=function(){for(var t=this._count-1;t>=0;t--)this._clones[t].parent=null,this._clones[t].getChildren()[0].dispose(),this._clones[t].dispose();this._rootNode.dispose()},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(t){var e=Number(t);if(e<Number(this._count)){for(var n=this._count-1;n>=e;n--)this._clones[n]["delete"]();this._count=e,this._clones.length=e}else if(e>Number(this._count)){var o=this._count;this._count=e,this.createClones(o)}this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{set:function(t){var e="step"==t,n=this._count-1;e&&0==this._iModeStep&&(n=1/n),this._R=BABYLON.Vector3.Lerp(s.vZero,this._R,n),this._P=BABYLON.Vector3.Lerp(s.vZero,this._P,n),this._S=BABYLON.Vector3.Lerp(s.vOne,this._S,n),this._iModeStep=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return{x:this._P.x,y:this._P.y,z:this._P.z}},set:function(t){this._P.x=t.x,this._P.y=t.y,this._P.z=t.z,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return{x:this._S.x,y:this._S.y,z:this._S.z}},set:function(t){this._S.x=t.x,this._S.y=t.y,this._S.z=t.z,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return{x:180*this._R.x/Math.PI,y:180*this._R.y/Math.PI,z:180*this._R.z/Math.PI}},set:function(t){this._R.x=t.x*Math.PI/180,this._R.y=t.y*Math.PI/180,this._R.z=t.z*Math.PI/180,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mesh",{get:function(){return this._mesh},enumerable:!0,configurable:!0}),e}(s);t.LinearCloner=a}(BABYLONX||(BABYLONX={}));
   
var createScene = function () {
    var scene = new BABYLON.Scene(engine);

    var camera = new BABYLON.ArcRotateCamera("Camera", Math.PI, Math.PI / 8, 15, BABYLON.Vector3.Zero(), scene);

    camera.attachControl(canvas, true);

    var light = new BABYLON.HemisphericLight("hemi", new BABYLON.Vector3(0, 1, 0), scene);

    //Creation of 3 boxes and 2 spheres
    var box1 = BABYLON.Mesh.CreateBox("Box1", 0.3, scene);
    var box2 = BABYLON.Mesh.CreateBox("Box2", 0.4, scene);
    var rc= new BABYLONX.RadialCloner([box1,box2],scene,{radius:2,count:16,startangle:30,align:true});
    rc.align=true;
    var mc=new BABYLONX.MatrixCloner([rc],scene,{ mcount:{x:2,y:5,z:2},size:{x:5,y:1,z:5}});
    
    
    rc.root.position.y=2;
    return scene;
}